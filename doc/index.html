<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'>
<h1 id="label-RokuBuilder">RokuBuilder</h1>

<p>A tool to help with Roku Development. Assists with the following roku
development tasks:</p>
<ul><li>
<p>Sideloading</p>
</li><li>
<p>Packaging</p>
</li><li>
<p>Building</p>
</li><li>
<p>Testing</p>
</li><li>
<p>Deeplink testing</p>
</li><li>
<p>Intergration test scripting</p>
</li><li>
<p>Manifest Updating</p>
</li><li>
<p>App Deleteing</p>
</li><li>
<p>Package Inspection</p>
</li><li>
<p>Monitoring logs</p>
</li></ul>

<p>The tool allows scripting of the following interactions with the roku:</p>
<ul><li>
<p>Conroller inputs</p>
</li><li>
<p>Text Input</p>
</li><li>
<p>Restarting</p>
</li></ul>

<p>Other tasks the tool can complete:</p>
<ul><li>
<p>Configuration Generation</p>
</li><li>
<p>Configuration Validation</p>
</li><li>
<p>Configuration Updating</p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>Install it yourself with:</p>

<pre class="code ruby"><code class="ruby">$ gem install roku_builder</code></pre>

<h2 id="label-Usage">Usage</h2>

<h4 id="label-Configuration">Configuration</h4>

<p>The gem must have a configuration file. To generate this file you can run
the following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --configure</code></pre>

<p>This will create the file &#39;~/.roku_config.json&#39; with a default
configuration. Edit this file to add appropriate values. The following are
default configuration options:</p>
<ul><li>
<p>devices: information for accessing devices</p>
</li><li>
<p>devices -&gt; default: id of the default device</p>
</li><li>
<p>projects: this is a hash of project objects</p>
</li><li>
<p>projects -&gt; default: the key for the default project</p>
</li></ul>

<p>Each Device has the following options:</p>
<ul><li>
<p>ip: ip address of the device</p>
</li><li>
<p>user: dev username for the roku device</p>
</li><li>
<p>password: dev password for the roku device</p>
</li></ul>

<p>Each project has the following options:</p>
<ul><li>
<p>directory: full path of the git repository the houses the roku app</p>
</li><li>
<p>app_name: Name used when packaging the app</p>
</li><li>
<p>stages: a hash of stage objects</p>
</li></ul>

<p>Each stage has the following options:</p>
<ul><li>
<p>branch: name of the branch for the given stage</p>
</li><li>
<p>key: has of key options for signing a package</p>
</li><li>
<p>key -&gt; keyed_pkg: path to a pkg file that has been signed</p>
</li><li>
<p>key -&gt; password: password for the signed pkg</p>
</li></ul>

<h4 id="label-Sideloading">Sideloading</h4>

<p>There are several ways to side load an app. You can sideload based on a
stage, an arbitrary git referance or the working directory.</p>

<p>To sideload a stage you can run the following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --sideload --stage production</code></pre>

<p>This will sideload the production stage. By default the production stage is
used. So the above is equivalent to the following:</p>

<pre class="code ruby"><code class="ruby">$ roku --sideload</code></pre>

<p>and:</p>

<pre class="code ruby"><code class="ruby">$ roku -l</code></pre>

<p>To sideload via a git referance you can run the following command</p>

<pre class="code ruby"><code class="ruby">$ roku --sideload --ref master</code></pre>

<p>This will sideload the master branch. The following is equivalent:</p>

<pre class="code ruby"><code class="ruby">$ roku -lr master</code></pre>

<p>To sideload the current working directory you can run the following:</p>

<pre class="code ruby"><code class="ruby">$ roku --sideload --working</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -lw</code></pre>

<p>If you choose to sideload via stage or git referance then the roku tool
with stash any changes in the working directory and then apply the stash
after. From time to time there may be an issue with this and you will have
to clear the stash manually.</p>

<p>You can also sideload the current directory even if it is not setup as a
project. If the directory has a manifest file then you can run the
following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --sideload --current</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -lc</code></pre>

<h4 id="label-Packaging">Packaging</h4>

<p>To package an app you need to have at least on stage set up in your
configuration file that has a key. Once you have that setup then you can
run the following:</p>

<pre class="code ruby"><code class="ruby">$ roku --package --stage production</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -ps production</code></pre>

<h4 id="label-Building">Building</h4>

<p>You can build an app to be sideloaded later or by someone else by using the
following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --build --stage production</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -bw</code></pre>

<h4 id="label-Monitoring+Logs">Monitoring Logs</h4>

<p>The tool has the ability to monitor the different development logs. You use
the feature using the command –monitor and passing in the type of log you
want to monitor. For example the following command will monitor the main
brightscript log:</p>

<pre class="code ruby"><code class="ruby">$ roku --monitor main</code></pre>

<p>or:  $ roku -m main</p>

<p>The following are the options to be passed in as type:</p>
<ul><li>
<p>main</p>
</li><li>
<p>sg</p>
</li><li>
<p>task1</p>
</li><li>
<p>task2</p>
</li><li>
<p>task3</p>
</li><li>
<p>taskX</p>
</li></ul>

<p>The tool connects to the roku via telnet and prints everything that it
recieves. It will continue indefinatly unless it is stopped via Ctrl-c or
entering “q”.</p>

<h4 id="label-Testing">Testing</h4>

<p>There are a few tools that can be used for testing. The testing command
will sideload the branch defined in the testing stage. It will then connect
to the device via telnet and look for the following strings and prints
everything inbetween them:</p>

<p>Start delimiter: ***** STARTING TESTS *****</p>

<p>End delimiter: ***** ENDING TESTS *****</p>

<p>This is designed to be used with the brstest library. Ensure that if you
use this that the app the prints out a sufficent number of lines after the
tests are run otherwise it will just grab the test run from last time.</p>

<p>Another tool for testing is the navigate command. You can use this to
script navigation on the roku console. The command is used as follows:</p>

<pre class="code ruby"><code class="ruby">$ roku --navigate &lt;command&gt;</code></pre>

<p>The possible commands are as follows:</p>
<ul><li>
<p>up</p>
</li><li>
<p>down</p>
</li><li>
<p>right</p>
</li><li>
<p>left</p>
</li><li>
<p>select</p>
</li><li>
<p>back</p>
</li><li>
<p>home</p>
</li><li>
<p>rew</p>
</li><li>
<p>ff</p>
</li><li>
<p>play</p>
</li><li>
<p>replay</p>
</li></ul>

<p>There is also a command that will allow you to send text to the roku. It is
used as follows:</p>

<pre class="code ruby"><code class="ruby">$ roku --type &lt;text&gt;</code></pre>

<h4 id="label-Other+Tools">Other Tools</h4>

<p>You can restart the roku device using the following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --restart</code></pre>

<p>You can deeplink into your app using the following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --deeplink --mgid &lt;mgid&gt; --content-type &lt;content type&gt;</code></pre>

<p>This is currently setup to work with one specific app. It will be
generalized in the future.</p>

<p>You can delete the currently sideloaded app using the following command:</p>

<pre class="code ruby"><code class="ruby">$ roku --delete</code></pre>

<p>You can use a differnt configuration file useing the following option:</p>

<pre class="code ruby"><code class="ruby">&amp; roku --delete --config &lt;path&gt;</code></pre>

<p>This path will be expanded so you do not have to use the full path</p>

<h2 id="label-Projects">Projects</h2>

<p>The project used in the above examples is a smart default. If you are in a
project directory then it will use that project. If you not then it will
use the defualt that you have defined in your config. You can define what
project you want the command to be run on using the –project option:</p>

<pre class="code ruby"><code class="ruby">$ roku -lw --project project1</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -lw -P project1</code></pre>

<h2 id="label-Devices">Devices</h2>

<p>In the examples above the default device is used. If you have multiple
devices defined in your config then you can select a different one using
the following option:</p>

<pre class="code ruby"><code class="ruby">$ roku -lw --device device2</code></pre>

<p>or:</p>

<pre class="code ruby"><code class="ruby">$ roku -lw -D device2</code></pre>

<h2 id="label-Improvements">Improvements</h2>
<ul><li>
<p>Convert to YARD Docs</p>
</li><li>
<p>Use a logger instead of print statments</p>
</li><li>
<p>Remove magic numbers from ConfigManager</p>
</li><li>
<p>Increase testing</p>
</li><li>
<p>Move RokuBuilder::Controller to RokuBuilder?</p>
</li><li>
<p>Allow start and end delimiter to be configured</p>
</li></ul>

<h2 id="label-Contributing">Contributing</h2>
<ol><li>
<p>Fork it</p>
</li><li>
<p>Create your feature branch (<code>git checkout -b
feature/my-new-feature</code>)</p>
</li><li>
<p>Commit your changes (<code>git commit -am &#39;Add some
feature&#39;</code>)</p>
</li><li>
<p>Push to the branch (<code>git push origin feature/my-new-feature</code>)</p>
</li><li>
<p>Create a new Pull Request</p>
</li></ol>
</div></div>

    <div id="footer">
  Generated on Thu Feb 11 15:11:03 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.1).
</div>

  </body>
</html>