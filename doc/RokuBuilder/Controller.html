<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: RokuBuilder::Controller
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!RokuBuilder/Controller.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../RokuBuilder.html" title="RokuBuilder (module)">RokuBuilder</a></span></span>
     &raquo; 
    <span class="title">Controller</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: RokuBuilder::Controller
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">RokuBuilder::Controller</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/roku_builder/controller.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Controls all interaction with other classes</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="VALID-constant" class="">VALID =
          <div class="docstring">
  <div class="discussion">
    
<p>Valid Options</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="EXTRA_COMMANDS-constant" class="">EXTRA_COMMANDS =
          <div class="docstring">
  <div class="discussion">
    
<p>Too many commands given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="NO_COMMANDS-constant" class="">NO_COMMANDS =
          <div class="docstring">
  <div class="discussion">
    
<p>No commands given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>2</span></pre></dd>
      
        <dt id="EXTRA_SOURCES-constant" class="">EXTRA_SOURCES =
          <div class="docstring">
  <div class="discussion">
    
<p>Too many source options given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>3</span></pre></dd>
      
        <dt id="NO_SOURCE-constant" class="">NO_SOURCE =
          <div class="docstring">
  <div class="discussion">
    
<p>No source options given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>4</span></pre></dd>
      
        <dt id="BAD_CURRENT-constant" class="">BAD_CURRENT =
          <div class="docstring">
  <div class="discussion">
    
<p>Incorrect use of current option</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>5</span></pre></dd>
      
        <dt id="BAD_DEEPLINK-constant" class="">BAD_DEEPLINK =
          <div class="docstring">
  <div class="discussion">
    
<p>No deeplink options supplied for deeplink</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>6</span></pre></dd>
      
        <dt id="DEPRICATED_CONFIG-constant" class="">DEPRICATED_CONFIG =
          <div class="docstring">
  <div class="discussion">
    
<p>Config has deplicated options</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='op'>-</span><span class='int'>1</span></pre></dd>
      
        <dt id="SUCCESS-constant" class="">SUCCESS =
          <div class="docstring">
  <div class="discussion">
    
<p>Valid config</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="CONFIG_OVERWRITE-constant" class="">CONFIG_OVERWRITE =
          <div class="docstring">
  <div class="discussion">
    
<p>Tring to overwrite existing config file</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="MISSING_CONFIG-constant" class="">MISSING_CONFIG =
          <div class="docstring">
  <div class="discussion">
    
<p>Missing config file</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>2</span></pre></dd>
      
        <dt id="INVALID_CONFIG-constant" class="">INVALID_CONFIG =
          <div class="docstring">
  <div class="discussion">
    
<p>Invalid config file</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>3</span></pre></dd>
      
        <dt id="MISSING_MANIFEST-constant" class="">MISSING_MANIFEST =
          <div class="docstring">
  <div class="discussion">
    
<p>Missing manifest file</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>4</span></pre></dd>
      
        <dt id="UNKNOWN_DEVICE-constant" class="">UNKNOWN_DEVICE =
          <div class="docstring">
  <div class="discussion">
    
<p>Unknow device given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>5</span></pre></dd>
      
        <dt id="UNKNOWN_PROJECT-constant" class="">UNKNOWN_PROJECT =
          <div class="docstring">
  <div class="discussion">
    
<p>Unknown project given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>6</span></pre></dd>
      
        <dt id="UNKNOWN_STAGE-constant" class="">UNKNOWN_STAGE =
          <div class="docstring">
  <div class="discussion">
    
<p>Unknown stage given</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>7</span></pre></dd>
      
        <dt id="FAILED_SIDELOAD-constant" class="">FAILED_SIDELOAD =
          <div class="docstring">
  <div class="discussion">
    
<p>Failed to sideload app</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>8</span></pre></dd>
      
        <dt id="FAILED_SIGNING-constant" class="">FAILED_SIGNING =
          <div class="docstring">
  <div class="discussion">
    
<p>Failed to sign app</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>9</span></pre></dd>
      
        <dt id="FAILED_DEEPLINKING-constant" class="">FAILED_DEEPLINKING =
          <div class="docstring">
  <div class="discussion">
    
<p>Failed to deeplink to app</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>10</span></pre></dd>
      
        <dt id="FAILED_NAVIGATING-constant" class="">FAILED_NAVIGATING =
          <div class="docstring">
  <div class="discussion">
    
<p>Failed to send navigation command</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>11</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#commands-class_method" title="commands (class method)">+ (Array&lt;Symbol&gt;) <strong>commands</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>List of command options.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#configure-class_method" title="configure (class method)">+ (Integer) <strong>configure</strong>(options:) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Configure the gem.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle_options-class_method" title="handle_options (class method)">+ (Integer) <strong>handle_options</strong>(options:) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Run commands.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#load_config-class_method" title="load_config (class method)">+ (Integer, Hash) <strong>load_config</strong>(options:) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load config file and generate intermeidate configs.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#source_commands-class_method" title="source_commands (class method)">+ (Array&lt;Symbol&gt;) <strong>source_commands</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>List of commands requiring a source option.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#sources-class_method" title="sources (class method)">+ (Array&lt;Symbol&gt;) <strong>sources</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>List of source options.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#update_configs-class_method" title="update_configs (class method)">+ (Hash) <strong>update_configs</strong>(configs:, options:) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update the intermeidate configs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_options-class_method" title="validate_options (class method)">+ (Integer) <strong>validate_options</strong>(options:) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Validates the commands.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="commands-class_method">
  
    + (<tt>Array&lt;Symbol&gt;</tt>) <strong>commands</strong>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>List of command options</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>List of command symbols that can be used in the options hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 177</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_commands'>commands</span>
  <span class='lbracket'>[</span><span class='symbol'>:sideload</span><span class='comma'>,</span> <span class='symbol'>:package</span><span class='comma'>,</span> <span class='symbol'>:test</span><span class='comma'>,</span> <span class='symbol'>:deeplink</span><span class='comma'>,</span><span class='symbol'>:configure</span><span class='comma'>,</span> <span class='symbol'>:validate</span><span class='comma'>,</span> <span class='symbol'>:delete</span><span class='comma'>,</span>
    <span class='symbol'>:navigate</span><span class='comma'>,</span> <span class='symbol'>:text</span><span class='comma'>,</span> <span class='symbol'>:build</span><span class='comma'>,</span> <span class='symbol'>:monitor</span><span class='comma'>,</span> <span class='symbol'>:update</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configure-class_method">
  
    + (<tt>Integer</tt>) <strong>configure</strong>(options:)  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Configure the gem</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The options hash</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Success or failure code</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 197</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_configure'>configure</span><span class='lparen'>(</span><span class='label'>options:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_config'>source_config</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>..</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config.json.example</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_target_config'>target_config</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_target_config'>target_config</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edit_params</span><span class='rbracket'>]</span>
      <span class='kw'>return</span> <span class='const'>CONFIG_OVERWRITE</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'>### Copy Config File ###
</span>    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span><span class='lparen'>(</span><span class='id identifier rubyid_source_config'>source_config</span><span class='comma'>,</span> <span class='id identifier rubyid_target_config'>target_config</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edit_params</span><span class='rbracket'>]</span>
    <span class='const'>ConfigManager</span><span class='period'>.</span><span class='id identifier rubyid_edit_config'>edit_config</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='id identifier rubyid_target_config'>target_config</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edit_params</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>device:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:device</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>project:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>stage:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:stage</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='const'>SUCCESS</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="handle_options-class_method">
  
    + (<tt>Integer</tt>) <strong>handle_options</strong>(options:) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Run commands</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The options hash</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return code for options handeling</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 94</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_handle_options'>handle_options</span><span class='lparen'>(</span><span class='label'>options:</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:configure</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_configure'>configure</span><span class='lparen'>(</span><span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_config'>load_config</span><span class='lparen'>(</span><span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_commands'>commands</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_command'>command</span>
  <span class='kw'>when</span> <span class='symbol'>:validate</span>
    <span class='comment'># Do Nothing #
</span>  <span class='kw'>when</span> <span class='symbol'>:sideload</span>
    <span class='comment'>### Sideload App ###
</span>    <span class='id identifier rubyid_loader'>loader</span> <span class='op'>=</span> <span class='const'>Loader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_loader'>loader</span><span class='period'>.</span><span class='id identifier rubyid_sideload'>sideload</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:sideload_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>FAILED_SIGNING</span> <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
  <span class='kw'>when</span> <span class='symbol'>:package</span>
    <span class='comment'>### Package App ###
</span>    <span class='id identifier rubyid_keyer'>keyer</span> <span class='op'>=</span> <span class='const'>Keyer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_loader'>loader</span> <span class='op'>=</span> <span class='const'>Loader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_packager'>packager</span> <span class='op'>=</span> <span class='const'>Packager</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_inspector'>inspector</span> <span class='op'>=</span> <span class='const'>Inspector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WARNING: Packaging working directory</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:working</span><span class='rbracket'>]</span>
    <span class='comment'># Sideload #
</span>    <span class='id identifier rubyid_build_version'>build_version</span> <span class='op'>=</span> <span class='id identifier rubyid_loader'>loader</span><span class='period'>.</span><span class='id identifier rubyid_sideload'>sideload</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:sideload_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>FAILED_SIDELOAD</span> <span class='kw'>unless</span> <span class='id identifier rubyid_build_version'>build_version</span>
    <span class='comment'># Key #
</span>    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_keyer'>keyer</span><span class='period'>.</span><span class='id identifier rubyid_rekey'>rekey</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WARNING: Key did not change</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
    <span class='comment'># Package #
</span>    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_version</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_build_version'>build_version</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_configs'>update_configs</span><span class='lparen'>(</span><span class='label'>configs:</span> <span class='id identifier rubyid_configs'>configs</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_packager'>packager</span><span class='period'>.</span><span class='id identifier rubyid_package'>package</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Signing Successful: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_success'>success</span>
    <span class='kw'>return</span> <span class='const'>FAILED_SIGNING</span> <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
    <span class='comment'># Inspect #
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:inspect</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='id identifier rubyid_inspector'>inspector</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='lparen'>(</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:inspect_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>App Name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:app_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dev ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:dev_id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Creation Date: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:creation_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dev.zip: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:dev_zip</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='symbol'>:build</span>
    <span class='comment'>### Build ###
</span>    <span class='id identifier rubyid_loader'>loader</span> <span class='op'>=</span> <span class='const'>Loader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_device_config'>device_config</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_build_version'>build_version</span> <span class='op'>=</span> <span class='const'>ManifestManager</span><span class='period'>.</span><span class='id identifier rubyid_build_version'>build_version</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_manifest_config'>manifest_config</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_version</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_build_version'>build_version</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_configs'>update_configs</span><span class='lparen'>(</span><span class='label'>configs:</span> <span class='id identifier rubyid_configs'>configs</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_outfile'>outfile</span> <span class='op'>=</span> <span class='id identifier rubyid_loader'>loader</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:build_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Build: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_outfile'>outfile</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='symbol'>:update</span>
    <span class='comment'>### Update ###
</span>    <span class='id identifier rubyid_old_version'>old_version</span> <span class='op'>=</span> <span class='const'>ManifestManager</span><span class='period'>.</span><span class='id identifier rubyid_build_version'>build_version</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:manifest_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_version'>new_version</span> <span class='op'>=</span> <span class='const'>ManifestManager</span><span class='period'>.</span><span class='id identifier rubyid_update_build'>update_build</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:manifest_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Update build version from:\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old_version'>old_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nto:\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_version'>new_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='symbol'>:deeplink</span>
    <span class='comment'>### Deeplink ###
</span>    <span class='id identifier rubyid_linker'>linker</span> <span class='op'>=</span> <span class='const'>Linker</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_linker'>linker</span><span class='period'>.</span><span class='id identifier rubyid_link'>link</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:deeplink_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>FAILED_DEEPLINKING</span> <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
  <span class='kw'>when</span> <span class='symbol'>:delete</span>
    <span class='id identifier rubyid_loader'>loader</span> <span class='op'>=</span> <span class='const'>Loader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_loader'>loader</span><span class='period'>.</span><span class='id identifier rubyid_unload'>unload</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbol'>:monitor</span>
    <span class='id identifier rubyid_monitor'>monitor</span> <span class='op'>=</span> <span class='const'>Monitor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_monitor'>monitor</span><span class='period'>.</span><span class='id identifier rubyid_monitor'>monitor</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:monitor_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbol'>:navigate</span>
    <span class='id identifier rubyid_navigator'>navigator</span> <span class='op'>=</span> <span class='const'>Navigator</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_navigator'>navigator</span><span class='period'>.</span><span class='id identifier rubyid_nav'>nav</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:navigate_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>FAILED_NAVIGATING</span> <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
  <span class='kw'>when</span> <span class='symbol'>:text</span>
    <span class='id identifier rubyid_navigator'>navigator</span> <span class='op'>=</span> <span class='const'>Navigator</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_navigator'>navigator</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:text_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbol'>:test</span>
    <span class='id identifier rubyid_tester'>tester</span> <span class='op'>=</span> <span class='const'>Tester</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tester'>tester</span><span class='period'>.</span><span class='id identifier rubyid_run_tests'>run_tests</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:test_config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='const'>SUCCESS</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_config-class_method">
  
    + (<tt>Integer</tt>, <tt>Hash</tt>) <strong>load_config</strong>(options:)  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Load config file and generate intermeidate configs</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The options hash</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return code</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Loaded config</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Intermeidate configs</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 219</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_config'>load_config</span><span class='lparen'>(</span><span class='label'>options:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config_file'>config_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>MISSING_CONFIG</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>SUCCESS</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'>ConfigManager</span><span class='period'>.</span><span class='id identifier rubyid_get_config'>get_config</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='id identifier rubyid_config_file'>config_file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_codes'>codes</span> <span class='op'>=</span> <span class='const'>ConfigManager</span><span class='period'>.</span><span class='id identifier rubyid_validate_config'>validate_config</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fatal'>fatal</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_warning'>warning</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_codes'>codes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_code'>code</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid Config: </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span> <span class='const'>ConfigManager</span><span class='period'>.</span><span class='id identifier rubyid_error_codes'>error_codes</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_code'>code</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_fatal'>fatal</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>&lt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Depricated Config: </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span> <span class='const'>ConfigManager</span><span class='period'>.</span><span class='id identifier rubyid_error_codes'>error_codes</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_code'>code</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_warning'>warning</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='int'>0</span> <span class='kw'>and</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:validate</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Config Valid</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='const'>INVALID_CONFIG</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_fatal'>fatal</span>
  <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>DEPRICATED_CONFIG</span> <span class='kw'>if</span> <span class='id identifier rubyid_warning'>warning</span>

  <span class='comment'>#set device
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:device</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:device</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:devices</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='comment'>#set project
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:current</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='kw'>not</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backtick'>`</span><span class='tstring_content'>pwd</span><span class='tstring_end'>`</span></span>
    <span class='id identifier rubyid_project'>project</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_repo_path'>repo_path</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='symbol'>:directory</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_realdirpath'>realdirpath</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_path'>repo_path</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_project'>project</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span>
          <span class='kw'>break</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_project'>project</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'>#set outfile
</span>  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.zip</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.pkg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Create Device Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:devices</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:device</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='const'>UNKNOWN_DEVICE</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:device_config</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_project_config'>project_config</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:current</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pwd'>pwd</span> <span class='op'>=</span> <span class='backtick'>`</span><span class='tstring_content'>pwd</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='const'>MISSING_MANIFEST</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_pwd'>pwd</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>manifest</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_project_config'>project_config</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>directory:</span> <span class='backtick'>`</span><span class='tstring_content'>pwd</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='comma'>,</span>
      <span class='label'>folders:</span> <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='label'>files:</span> <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='label'>stages:</span> <span class='lbrace'>{</span> <span class='label'>production:</span> <span class='lbrace'>{</span> <span class='label'>branch:</span> <span class='kw'>nil</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_project_config'>project_config</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:project</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='const'>UNKNOWN_PROJECT</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project_config'>project_config</span>
  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:project_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_project_config'>project_config</span>
  <span class='id identifier rubyid_stage'>stage</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:stage</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='const'>UNKNOWN_STAGE</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:stages</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_stage'>stage</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:stage</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_stage'>stage</span>

  <span class='id identifier rubyid_root_dir'>root_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:directory</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_branch'>branch</span> <span class='op'>=</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:stages</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_stage'>stage</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:branch</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_branch'>branch</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ref</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ref</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_branch'>branch</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:current</span><span class='rbracket'>]</span>

  <span class='comment'># Create Sideload Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:sideload_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>root_dir:</span> <span class='id identifier rubyid_root_dir'>root_dir</span><span class='comma'>,</span>
    <span class='label'>branch:</span> <span class='id identifier rubyid_branch'>branch</span><span class='comma'>,</span>
    <span class='label'>update_manifest:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update_manifest</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>fetch:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:fetch</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>folders:</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:folders</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>files:</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:files</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Key Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:stages</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_stage'>stage</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span>
  <span class='comment'># Create Package Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>password:</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>app_version_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:app_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stage'>stage</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:outfile</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># Create Inspector Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:inspect_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>pkg:</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>password:</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Build Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:build_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>root_dir:</span> <span class='id identifier rubyid_root_dir'>root_dir</span><span class='comma'>,</span>
    <span class='label'>branch:</span> <span class='id identifier rubyid_branch'>branch</span><span class='comma'>,</span>
    <span class='label'>fetch:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:fetch</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>folders:</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:folders</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>files:</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:files</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Manifest Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:manifest_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>root_dir:</span> <span class='id identifier rubyid_project_config'>project_config</span><span class='lbracket'>[</span><span class='symbol'>:directory</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Deeplink Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:deeplink_config</span><span class='rbracket'>]</span> <span class='op'>=</span><span class='lbrace'>{</span>
    <span class='label'>options:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:deeplink_options</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Monitor Config
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:monitor</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:monitor_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>type:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:monitor</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='comment'># Create Navigate Config
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:navigate</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:navigate_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>command:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:navigate</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='comment'># Create Text Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:text_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>text:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='comment'># Create Test Config
</span>  <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:test_config</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>sideload_config:</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:sideload_config</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_configs'>configs</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="source_commands-class_method">
  
    + (<tt>Array&lt;Symbol&gt;</tt>) <strong>source_commands</strong>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>List of commands requiring a source option</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>List of command symbols that require a source in the options hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 190</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_source_commands'>source_commands</span>
  <span class='lbracket'>[</span><span class='symbol'>:sideload</span><span class='comma'>,</span> <span class='symbol'>:package</span><span class='comma'>,</span> <span class='symbol'>:test</span><span class='comma'>,</span> <span class='symbol'>:build</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sources-class_method">
  
    + (<tt>Array&lt;Symbol&gt;</tt>) <strong>sources</strong>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>List of source options</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>List of source symbols that can be used in the options hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 184</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sources'>sources</span>
  <span class='lbracket'>[</span><span class='symbol'>:ref</span><span class='comma'>,</span> <span class='symbol'>:set_stage</span><span class='comma'>,</span> <span class='symbol'>:working</span><span class='comma'>,</span> <span class='symbol'>:current</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_configs-class_method">
  
    + (<tt>Hash</tt>) <strong>update_configs</strong>(configs:, options:)  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update the intermeidate configs</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>configs</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Intermeidate configs hash</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Options hash</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>New intermeidate configs hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375
376
377
378
379
380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 373</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_configs'>update_configs</span><span class='lparen'>(</span><span class='label'>configs:</span><span class='comma'>,</span> <span class='label'>options:</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_version</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:app_version_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:project_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:app_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:stage</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_version</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:outfile</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:out_folder</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:project_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:app_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:stage</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_version</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pkg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:inspect_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:pkg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span><span class='lbracket'>[</span><span class='symbol'>:package_config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:out_file</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_configs'>configs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_options-class_method">
  
    + (<tt>Integer</tt>) <strong>validate_options</strong>(options:) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Validates the commands</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The options hash</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Status code for command validation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/roku_builder/controller.rb', line 73</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate_options'>validate_options</span><span class='lparen'>(</span><span class='label'>options:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_commands'>commands</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='op'>&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_commands'>commands</span>
  <span class='kw'>return</span> <span class='const'>EXTRA_COMMANDS</span> <span class='kw'>if</span> <span class='id identifier rubyid_commands'>commands</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>
  <span class='kw'>return</span> <span class='const'>NO_COMMANDS</span> <span class='kw'>if</span> <span class='id identifier rubyid_commands'>commands</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;</span> <span class='int'>1</span>
  <span class='id identifier rubyid_sources'>sources</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='op'>&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sources'>sources</span>
  <span class='kw'>return</span> <span class='const'>EXTRA_SOURCES</span> <span class='kw'>if</span> <span class='id identifier rubyid_sources'>sources</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='op'>&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_source_commands'>source_commands</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='const'>NO_SOURCE</span> <span class='kw'>unless</span> <span class='id identifier rubyid_sources'>sources</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_sources'>sources</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:current</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>BAD_CURRENT</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sideload</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:deeplink</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='const'>BAD_DEEPLINK</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:deeplink_options</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:deeplink_options</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='const'>VALID</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Feb 11 15:11:04 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.1).
</div>

  </body>
</html>